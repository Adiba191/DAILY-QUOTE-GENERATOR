<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Favorite Quotes</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>‚≠ê My Favorite Quotes</h1>
  <div id="favoritesList">
    <ul id="favoritesUl" style="list-style:none; padding:0;"></ul>
  </div>
  <br>
  <button onclick="window.location.href='index.html'">‚¨Ö Back to Home</button>

  <script>
    const apiBase = "http://localhost:3000/api/quotes";

    async function getFavorites() {
      try {
        const res = await fetch(`${apiBase}/favorites`);
        const data = await res.json();

        const favoritesUl = document.getElementById("favoritesUl");
        favoritesUl.innerHTML = "";

        if (data.length === 0) {
          favoritesUl.innerHTML = "<li>No favorites yet!</li>";
        } else {
          data.forEach(fav => {
            const li = document.createElement("li");
            li.innerHTML = `‚Äú${fav.text}‚Äù <br><small>- ${fav.author}</small>`;

            const delBtn = document.createElement("button");
            delBtn.innerText = "üóë Delete";
            delBtn.classList.add("deleteBtn");
            delBtn.onclick = () => deleteFavorite(fav._id);

            li.appendChild(delBtn);
            favoritesUl.appendChild(li);
          });
        }
      } catch (err) {
        console.error(err);
        alert("Error loading favorites!");
      }
    }

    async function deleteFavorite(id) {
      if (!confirm("Are you sure you want to delete this favorite?")) return;
      try {
        const res = await fetch(`${apiBase}/favorites/${id}`, { method: "DELETE" });
        const data = await res.json();
        alert(data.message || "Deleted!");
        getFavorites();
      } catch (err) {
        console.error(err);
        alert("Error deleting favorite!");
      }
    }

    // Load favorites on page open
    getFavorites();
  </script>
</body>
</html>
